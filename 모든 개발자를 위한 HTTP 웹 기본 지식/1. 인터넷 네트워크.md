## 1. 인터넷 네트워크

#### IP (인터넷 프로토콜)

클라이언트와 서버 사이에 인터넷을 통한 통신이 이루어질 때, 최소한의 규칙이 필요할 것이다.

-> IP 주소를 통해 해결!

<br/>

**🍒 인터넷 프로토콜 스택의 4계층**

애플리케이션 계층 - HTTP, FTP

전송 계층 - TCP, UDP

인터넷 계층 - IP

네트워크 인터페이스 계층 - LAN

<br/>

**🍒 IP 역할**

* 지정한 IP 주소에 데이터 전달
* 패킷이라는 통신 단위로 전달

<br/>

**🍒 IP 패킷**

출발지 IP, 목적지 IP 등의 정보를 가지고 IP 패킷을 만든다.

클라이언트(출발지)에서 IP 패킷을 수 많은 노드가 있는 인터넷 망에 전달한다. 

노드끼리 서로 이 정보를 주고 받으면 목적지에 도착하게 된다.

서버(도착지)에서 정보를 잘 받으면 같은 방식으로 OK 메시지를 클라이언트에 전달할 수 있다.

<br/>

**🍒 IP 프로토콜의 한계**

1. 비연결성

   * 패킷을 받을 대상이 없거나 서비스 불능 상태여도 패킷을 전송한다.

2. 비신뢰성

   * 패킷 소실 (노드가 꺼져있다면?)
   * 패킷 전달 순서 문제 발생 - 패킷의 용량이 큰 경우 끊어 보내게 된다. 이 때 순서가 변경될 가능성이 있음

3. 프로그램 구분

   * 같은 IP를 사용하는 서버에서 통신하는 애플리케이션이 둘 이상이면? 

     (한 PC에서 음악을 들으며 게임을 할 때에도 같은 IP이기 때문에 문제 발생)

<br/>

#### TCP

**🍒 프로토콜 계층**

![image](https://user-images.githubusercontent.com/64277114/172280732-4376c1d1-20e3-4a68-86a2-7e74f4bcd790.png)

(이미지 출처 - 강의자료)

<br/>

**🍒 TCP/IP 패킷 정보**

IP 패킷 - 출발지 IP, 목적지 IP 등

TCP 세그먼트 - 출발지 PORT, 목적지 PORT, 전송 제어, 순서, 검증정보 등

-> IP 패킷만으로 해결되지 않았던 문제점 해결 가능!

<br/>

**🍒 TCP 특징** 

* 전송 제어 프로토콜 (Transmission Control Protocol)

* 연결지향 - 3 way handshake (연결을 먼저 한 후 메시지를 보낸다.)
* 데이터 전달 보증 - 누락된 패킷을 내가 알 수 있음
* 순서 보장 (1, 2, 3 순으로 보냈을 때 1, 3, 2 순서로 받았다면 2번부터 다시 보냄)

신뢰할 수 있는 프로토콜이며, 현재는 대부분의 애플리케이션에서 TCP를 사용한다.

<br/>

**🍒 TCP 3 way handshake**

<img src="https://user-images.githubusercontent.com/64277114/172281880-ac37aa92-301a-4225-8524-72d43fb6b3ef.png" alt="image" style="zoom: 67%;" />

1. 클라이언트에서 서버로 SYN 을 보낸다.
2. 서버에서 잘 받았으면 ACK와 SYN을 보낸다.
3. 클라이언트에서 ACK를 보낸다.

3 way handshake를 통해 클라이언트와 서버가 서로를 신뢰 가능해진다. (연결 보장)

연결이 보장되면 그 후에 데이터를 전송한다.

★ 하지만 요즘엔 최적화가 되어 ACK와 함께 데이터 전송이 가능하다.

★ 물리적 연결은 아니고 논리적 연결이 된 것임

<br/>

#### UDP

TCP와 같은 계층에 있는 사용자 데이터그램 프로토콜(User Datagram Protocol)

<br/>

**🍒 UDP 특징**

* 기능이 거의 없음

* 데이터 전달 보증 X, 순서 보장 X

* 데이터 전달 및 순서가 보장되지는 않지만, 단순하고 빠르다 (3 way handshake가 없으므로)

* IP와 거의 같으며 PORT, 체크섬 정도의 기능만 추가

  (PORT : 하나의 IP에서 여러 애플리케이션을 사용할 때, 어떤 애플리케이션인지 구분할 수 있는 것. IP가 아파트라면 PORT는 동, 호수! FTP - 20, 21 / TELNET - 23 / HTTP - 8- / HTTPS - 443)

  (체크섬 : 메시지가 제대로 왔는지 검증) 

* 애플리케이션에서 추가 작업 필요 (TCP는 최적화 불가능, UDP는 가능)

최근에는 UDP가 각광받고 있다.

