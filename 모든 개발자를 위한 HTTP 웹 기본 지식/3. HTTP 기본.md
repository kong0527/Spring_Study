## 3. HTTP κΈ°λ³Έ

#### HTTP

HyperText Transfer Protocol  

IMAGE, μμ„±, μμƒ, νμΌ λ“± κ±°μ λ¨λ“  ν•νƒμ λ°μ΄ν„° μ „μ†΅ κ°€λ¥

TCP ν”„λ΅ν† μ½μ„ μ§μ ‘ μ‚¬μ©ν•΄ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•λ” κ²½μ°λ” κ±°μ X -> HTTP μ‚¬μ©

TCP: HTTP/1.1, HTTP/2

UDP: HTTP/3 

<u>HTTP/1.1</u>μ„ κ°€μ¥ λ§μ΄ μ‚¬μ© (RFC7230~7235 λ²„μ „). HTTP/2, HTTP/3λ„ μ μ  μ¦κ°€

![image](https://user-images.githubusercontent.com/64277114/172310461-3501e9e4-7db0-4832-89b4-bcad465e40bc.png)

κ°λ°μλ„κµ¬ - network - protocol μ²΄ν¬

<br/>

#### HTTP νΉμ§•

**π’ ν΄λΌμ΄μ–ΈνΈ-μ„λ²„ κµ¬μ΅°**

ν΄λΌμ΄μ–ΈνΈκ°€ HTTP λ©”μ‹μ§€λ¥Ό ν†µν•΄ μ„λ²„μ— μ”μ²­μ„ λ³΄λ‚΄κ³ , μ„λ²„λ΅λ¶€ν„° μ‘λ‹µμ΄ μ¬ λ•κΉμ§€ κΈ°λ‹¤λ¦°λ‹¤.

μ„λ²„κ°€ μ”μ²­μ— λ€ν• κ²°κ³Όλ¥Ό μ‘λ‹µν•΄μ£Όλ©΄ ν΄λΌμ΄μ–ΈνΈκ°€ λ™μ‘ν•κ² λλ‹¤.

ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ¥Ό λ¶„λ¦¬ ν•λ” κ²ƒμ΄ μ¤‘μ”

-> λΉ„μ¦λ‹μ¤ λ΅μ§κ³Ό λ°μ΄ν„°λ” μ„λ²„μ—, ν΄λΌμ΄μ–ΈνΈλ” UIμ™€ μ‚¬μ©μ„±μ— μ§‘μ¤‘

-> ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ λ…λ¦½μ μΌλ΅ μ§„ν™” κ°€λ¥

<br/>

**π’ Stateless**

μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ μ΄μ „ μƒνƒλ¥Ό λ³΄μ΅΄ν•μ§€ μ•λ” κ²ƒ

π¥° μ¥μ  : κ°‘μκΈ° ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ΄ μ¦κ°€ν•΄λ„ μ„λ²„λ¥Ό λ€κ±°ν¬μ…ν•  μ μλ‹¤. μ‘λ‹µμ„λ²„λ¥Ό μ‰½κ² λ°”κΏ€ μ μμ–΄ μ„λ²„λ¥Ό λ¬΄ν•ν μ¦μ„¤μ΄ κ°€λ¥ν•λ‹¤. (μ¤μΌ€μΌ μ•„μ›ƒμ— μ λ¦¬)

π‘ λ‹¨μ  : ν΄λΌμ΄μ–ΈνΈκ°€ μ¶”κ°€ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•΄μ•Ό ν•λ‹¤.

β… μ‹¤λ¬΄μ—μ„μ ν•κ³„μ 

λ΅κ·ΈμΈμ΄ ν•„μ”μ—†λ” λ‹¨μ ν™”λ©΄μ—μ„λ” λ¬΄μƒνƒκ°€ κ°€λ¥ν•μ§€λ§, λ΅κ·ΈμΈμ΄ ν•„μ”ν• μ„λΉ„μ¤μ κ²½μ° μƒνƒμ μ§€κ°€ ν•„μ”ν•λ‹¤.

λ”°λΌμ„ μ΄κ²ƒμ€ λΈλΌμ°μ € μΏ ν‚¤μ™€ μ„λ²„ μ„Έμ…λ“±μ„ μ‚¬μ©ν•΄ μƒνƒ μ μ§€λ¥Ό ν•΄μ¤€λ‹¤.

μƒνƒ μ μ§€λ” μµμ†ν•μΌλ΅ μ‚¬μ©ν•λ” κ²ƒμ΄ μΆ‹λ‹¤. 

<br/>

**π’ λΉ„μ—°κ²°μ„± (connectionless)**

μ—°κ²°μ„ μ μ§€ν•λ” λ¨λΈμ κ²½μ°, μ—¬λ¬ ν΄λΌμ΄μ–ΈνΈμ™€ λ¨λ‘ μ—°κ²°μ΄ μ μ§€λμ–΄ μμΌλ―€λ΅ μ„λ²„μ μμ›μ΄ μ†λ¨λλ‹¤.

μ—°κ²°μ„ μ μ§€ν•μ§€ μ•λ” λ¨λΈμ κ²½μ°, μ„λ΅ ν•„μ”ν• κ²ƒλ§ μ£Όκ³  λ°›κ³  μ—°κ²°μ„ λμ–΄λ²„λ¦°λ‹¤.

HTTPλ” μ—°κ²°μ„ μ μ§€ν•μ§€ μ•λ” λ¨λΈ -> μ΄ λ‹¨μ„ μ΄ν•μ λΉ λ¥Έ μ†λ„ μ‘λ‹µ

λ”°λΌμ„ μ„λ²„ μμ›μ„ λ§¤μ° ν¨μ¨μ μΌλ΅ μ‚¬μ©ν•  μ μλ‹¤.

π‘ λ‹¨μ 

* TCP/IP μ—°κ²°μ„ μƒλ΅ λ§Ίμ–΄μ•Ό ν•κΈ° λ•λ¬Έμ— 3 way handshakeλ΅ μΈν• μ‹κ°„μ΄ μ¶”κ°€λ¨
* μ›Ή λΈλΌμ°μ €λ΅ μ‚¬μ΄νΈλ¥Ό μ”μ²­ν•λ©΄ html, js, css, μ΄λ―Έμ§€λ“± μ λ§μ€ μμ›μ΄ ν•¨κ» λ‹¤μ΄λ΅λ“ λλ‹¤.

-> μ§€κΈμ€ HTTP μ§€μ†μ—°κ²° (Persistent Connections)λ΅ λ¬Έμ  ν•΄κ²°

HTTP μ΄κΈ°

![image](https://user-images.githubusercontent.com/64277114/172316167-a8668aaf-f4fc-4605-9182-a032c41c6ff9.png)

μ§€μ† μ—°κ²°λ΅ κ°μ„ 

![image](https://user-images.githubusercontent.com/64277114/172316279-0e0e56e2-7598-4ab6-b220-486473b8532f.png)

(μ΄λ―Έμ§€ μ¶μ² - κ°•μμλ£)

<br/>

#### HTTP λ©”μ‹μ§€

**π’HTTP λ©”μ‹μ§€ κµ¬μ΅°**

```
start-line μ‹μ‘ λΌμΈ
header ν—¤λ”
empty line κ³µλ°± λΌμΈ(CRLF) - ν•„μ!!
message body - μ—†λ‹¤λ©΄ κ³µλ°±μΌλ΅ λ†“μΌλ©΄ λ¨
```

<br/>

**π’ μ‹μ‘ λΌμΈ(start-line)**

β… μ”μ²­ λ©”μ‹μ§€ (request-line)

```
GET /search?q=hello&hl=ko HTTP/1.1
Host: www.google.com
```

method SP(κ³µλ°±) request-target SP HTTP -version CRLF(μ—”ν„°)μ ν•μ‹

* HTTP λ©”μ„λ“ - GET, POST, PUT, DELETE, ...

  μ„λ²„κ°€ μν–‰ν•΄μ•Ό ν•  λ™μ‘ μ§€μ • (GET: λ¦¬μ†μ¤ μ΅°ν / POST: μ”μ²­ λ‚΄μ—­ μ²λ¦¬)

* request-target - μ λ€κ²½λ΅[?μΏΌλ¦¬] ν•μ‹

  "/"λ΅ μ‹μ‘ν•λ” κ²½λ΅

* HTTP λ²„μ „

<br/>

β… μ‘λ‹µ λ©”μ‹μ§€ (status-line)

```
HTTP/1.1 200 OK
Content-Type: text/html;charset=UTF-8
Content-Length: 3423

<html>
 <body>...</body>
</html>
```

HTTP-version SP status-code SP reason-phrase CRLF μ ν•μ‹

* HTTP λ²„μ „

* HTTP μƒνƒ μ½”λ“ - μ”μ²­μ΄ μ„±κ³µν–λ”μ§€, μ‹¤ν¨ν–λ”μ§€

  200 : μ„±κ³µ

  400 : ν΄λΌμ΄μ–ΈνΈ μ”μ²­ μ¤λ¥

  500 : μ„λ²„ λ‚΄λ¶€ μ¤λ¥

* μ΄μ  λ¬Έκµ¬ - μ‚¬λμ΄ μ΄ν•΄ν•  μ μλ” μ§§μ€ μƒνƒ μ½”λ“ μ„¤λ… κΈ€

<br/>

**π’ ν—¤λ”**

field-name ":" OWS field-value OWS μ ν•μ‹ (OWS = λ„μ–΄μ“°κΈ° ν—μ©μ΄λΌλ” λ»)

field-nameμ€ λ€μ†λ¬Έμ κµ¬λ¶„ X

```
// μ”μ²­
Host: www.google.com (Host : μ•λ¨!)

// μ‘λ‹µ
Content-Type: text/html;charset=UTF-8
Content-Length: 3423
```

β… μ©λ„

* HTTP μ „μ†΅μ— ν•„μ”ν• λ¨λ“  λ¶€κ°€ μ •λ³΄ ν¬ν•¨

  λ©”μ‹μ§€ λ°”λ”” λ‚΄μ©/ν¬κΈ°, μ••μ¶•, μΈμ¦, μ”μ²­ ν΄λΌμ΄μ–ΈνΈμ μ›Ή λΈλΌμ°μ € μ •λ³΄, μ„λ²„ μ• ν”λ¦¬μΌ€μ΄μ… μ •λ³΄,  ...

* ν•„μ”ν• λ¨λ“  meta data ν¬ν•¨

* ν•„μ”μ‹ μ„μμ ν—¤λ” μ¶”κ°€ κΈ°λ¥

<br/>

**π’ λ©”μ‹μ§€ λ°”λ””**

```
// μ‘λ‹µ
<html>
 <body>...</body>
</html>
```

μ‹¤μ  μ „μ†΅ν•  λ°μ΄ν„°λ¥Ό ν¬ν•¨ν•λ‹¤.

html, μ΄λ―Έμ§€, μμƒ, JSON λ“± byteλ΅ ν‘ν„ν•  μ μλ” λ¨λ“  λ°μ΄ν„° μ „μ†΅ κ°€λ¥