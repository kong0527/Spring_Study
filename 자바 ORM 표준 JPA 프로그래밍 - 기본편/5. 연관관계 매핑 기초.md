## 5. ì—°ê´€ê´€ê³„ ë§¤í•‘ ê¸°ì´ˆ

**ì—°ê´€ê´€ê³„ ë§¤í•‘ ì „**

```java
//íŒ€ ì €ì¥
Team team = new Team();
team.setName("TeamA");
em.persist(team);

//íšŒì› ì €ì¥
Member member = new Member();
member.setName("member1");
member.setTeamId(team.getId());
em.persist(member);

//ì €ì¥ í›„ ì°¾ê¸°
Member findMember = em.find(Member.class, member.getId());
Long findTeamId = findMember.getTeamId();
Team findTeam = em.find(Team.class, findTeamId);
```

íŒ€ê³¼ íšŒì›ì„ ì €ì¥í•  ë•Œ, member.setTeamì´ ì•„ë‹Œ setTeamIdë¡œ FKë¥¼ ì €ì¥í•˜ëŠ” í˜•ì‹

ì—°ê´€ëœ íŒ€ì„ ì°¾ì„ ë•Œ, ë¶ˆí•„ìš”í•œ ì½”ë“œê°€ ëŠ˜ì–´ë‚œë‹¤.

-> ê°ì²´ë¥¼ í…Œì´ë¸”ì— ë§ì¶”ì–´ ë°ì´í„° ì¤‘ì‹¬ìœ¼ë¡œ ëª¨ë¸ë§ í•˜ë©´, í˜‘ë ¥ ê´€ê³„ë¥¼ ë§Œë“¤ ìˆ˜ ì—†ë‹¤.

<br/>

#### ë‹¨ë°©í–¥ ì—°ê´€ê´€ê³„

![image](https://user-images.githubusercontent.com/64277114/179188789-e78e212b-670a-4d26-b398-1c57367b9ba1.png)

(ì´ë¯¸ì§€ ì¶œì²˜ - ê°•ì˜ìë£Œ)

```java
// Member class
@ManyToOne
@JoinColumn(name = "TEAM_ID")
private Team team;

// JPAMain class
Member member = new Member();
member.setUsername("member1");
member.setTeam(team);
em.persist(member);

Member findMember = em.find(Member.class, member.getId());
Team findTeam = findMember.getTeam();
System.out.println("findTeam.getName() = " + findTeam.getName());
```

Member classì—ì„œ Teamì— ê´€í•œ ì •ë³´ë¥¼ ì£¼ì…í•´ì£¼ë©´ findMember.getTeam()ì„ í†µí•´ ë°”ë¡œ team ê°ì²´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.

<br/>

#### ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„

![image](https://user-images.githubusercontent.com/64277114/179197152-d75602dd-2c2a-4699-a18f-2c507003c1f7.png)

(ì´ë¯¸ì§€ ì¶œì²˜ - ê°•ì˜ìë£Œ)

```java
// Team class
@OneToMany(mappedBy = "team")
private List<Member> members = new ArrayList<>();

//JPaMain class
Member findMember = em.find(Member.class, member.getId());
List<Member> members = findMember.getTeam().getMembers();
```

Team ê°ì²´ì—ë„ List<Member>ë¥¼ ì„ ì–¸í•´ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

<br/>

**ğŸ¤ mappedByê°€ ë­ì£ !?**

ê°ì²´ì™€ í…Œì´ë¸”ì´ ê´€ê³„ë¥¼ ë§ºëŠ” ì°¨ì´

âœ” ê°ì²´ ì—°ê´€ê´€ê³„ - 2ê°œ

íšŒì› -> íŒ€ (ë‹¨ë°©í–¥)  /  íŒ€ -> íšŒì› (ë‹¨ë°©í–¥) 

âœ” í…Œì´ë¸” ì—°ê´€ê´€ê³„ - 1ê°œ

íšŒì› <-> íŒ€ (ì–‘ë°©í–¥)

<u>**ì¦‰, ê°ì²´ì˜ ì–‘ë°©í™© ê´€ê³„ëŠ” ì‚¬ì‹¤ ì–‘ë°©í–¥ ê´€ê³„ê°€ ì•„ë‹ˆë¼ ì„œë¡œ ë‹¤ë¥¸ ë‹¨ë°©í–¥ ê´€ê³„ 2ê°œë‹¤.**</u>

<br/>

ê·¸ëŸ¬ë©´ Memberì˜ teamê³¼ Teamì˜ membersì¤‘ì— ì–´ë–¤ ê²ƒìœ¼ë¡œ FKë¥¼ ê´€ë¦¬í•´ì•¼ í• ê¹Œ?

 ì •ë‹µì€ ë‘˜ ì¤‘ í•˜ë‚˜ë¥¼ ì£¼ì¸(Owner)ìœ¼ë¡œ ì •í•´ì„œ ê´€ë¦¬í•´ì•¼ í•œë‹¤.

ì£¼ì¸ì„ ì§€ì •í•´, ì£¼ì¸ì´ ì•„ë‹Œ ìª½ì€ ì½ê¸°ë§Œ ê°€ëŠ¥í•˜ë„ë¡ í•œë‹¤.

ì£¼ì¸ì´ ì•„ë‹Œ ìª½ì— mappedBy ì†ì„±ìœ¼ë¡œ ì£¼ì¸ì„ ì§€ì •í•´ì£¼ë©´ ëœë‹¤.

â— ì™¸ë˜í‚¤ê°€ ìˆëŠ” ê³³ì„ ì£¼ì¸ìœ¼ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. (ë‹¤ ìª½ì¸ ê³³ì´ ì£¼ì¸)

<br/>





